(function(d){d.fn.jqtemplate=function(g,f){var i=d.extend({},d.fn.jqtemplate.defaults,f),h=this.selector+"/";if(this.data("compiled")!=true){c(this,this.selector);this.data("compiled",true)}if(i.inplace){return this.each(function(j,k){b(g,k,h+k.get(0).nodeName)})}else{var e=typeof(i.root)=="string"?d(i.root):i.root;return this.each(function(j,k){var l=d(k).clone();e.append(l);b(g,l,h+k.nodeName)})}};d.fn.jqtemplate.defaults={inplace:false,root:"body"};var a={};function c(g,k){k=k+"/"+g.get(0).nodeName;var j=["jqloop","jqbind","jqattr","jqtext"];for(var e in j){if(g.attr(j[e])){var h=new Function(["$this"],"return "+g.attr(j[e]));a[k+"/"+j[e]]=h}}g.children().each(function(f,l){c(d(l),k)})}function b(l,g,q){if(g.attr("jqloop")){var k=a[q+"/jqloop"](l),j=g,o=g;g.removeAttr("jqloop");for(var h in k.array){l[k.object]=k.array[h];var e=d(j.clone());o.after(e);o=e;b(l,e,q)}j.remove();return}if(g.attr("jqbind")){var f=d.makeArray(a[q+"/jqbind"](l));for(var h in f){g.bind(f[h].event,f[h],function(i){var r=i.data;r.fn.apply(this,d.makeArray(r.args))})}}if(g.attr("jqattr")){var n=a[q+"/jqattr"](l);for(var m in n){g.attr(m,n[m])}}if(g.attr("jqtext")){var p=a[q+"/jqtext"](l);g.text(p)}g.children().each(function(r,s){b(l,d(s),q+"/"+s.nodeName)})}})(jQuery);
(function($){$.fn.jqtemplate=function(model,options){var opts=$.extend({},$.fn.jqtemplate.defaults,options);if(opts.inplace){return this.each(function(i,node){evalNode(node)})}else{var root=typeof(opts.root)=="string"?$(opts.root):opts.root;return this.each(function(i,node){var copy=$(node).clone();root.append(copy);evalNode(copy,model)})}};$.fn.jqtemplate.defaults={inplace:false,root:"body"};function evalAndRemoveAttr(node,attrName,$this){var result=eval("("+node.attr(attrName)+")");node.removeAttr(attrName);return result}function evalNode(node,$this){while(true){if(node.attr("jqbind")){var bindings=evalAndRemoveAttr(node,"jqbind",$this);$.each($.makeArray(bindings),function(i,binding){node.bind(binding.event,function(){binding.fn.apply(this,$.makeArray(binding.args))})})}else{if(node.attr("jqattr")){var attrs=evalAndRemoveAttr(node,"jqattr",$this);$.each(attrs,function(key,val){node.attr(key,val)})}else{if(node.attr("jqtext")){var text=evalAndRemoveAttr(node,"jqtext",$this);node.text(text)}else{if(node.attr("jqloop")){var op=evalAndRemoveAttr(node,"jqloop",$this);var first=node;var last=node;$.each(op.array,function(i,obj){$this[op.object]=obj;var copy=$(first.clone());last.after(copy);last=copy;evalNode(copy,$this)});first.remove();return}else{break}}}}}node.children().each(function(i,node){evalNode($(node),$this)})}})(jQuery);